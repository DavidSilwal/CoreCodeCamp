<div class="row text-left">
  <div [style.visibility]="isBusy ? 'visible' : 'hidden'"><i class="fa fa-spin fa-spinner"></i> Please wait...</div>
  <div class="text-danger" [style.visibility]="error ? 'visible' : 'hidden'">{{ error }}</div>
  <div class="col-md-6">
    <form novalidate (ngSubmit)="saveEvent()" #theForm="ngForm">
      <div class="well well-sm">
        <div class="form-group">
          <label class="text-danger">Name *</label>
          <input [(ngModel)]="model.name" class="form-control" placeholder="Your Name" name="name" #name="ngModel" required minlength="5" />
          <span class="text-danger" [hidden]="name.errors == null || !name.errors['required']">* Required</span>
          <span class="text-danger" [hidden]="name.errors == null || !name.errors['minlength']">* Too short</span>
        </div>
        <div class="form-group">
          <label class="text-danger">Description *</label>
          <textarea [(ngModel)]="model.description" cols="40" rows="6" class="form-control" name="description" #description="ngModel" required minlength="100"></textarea>
          <span class="text-danger" [hidden]="description.errors == null || !description.errors['required']">* Required</span>
          <span class="text-danger" [hidden]="description.errors == null || !description.errors['minlength']">At least 100 characters</span>
        </div>
        <div class="form-group">
          <label class="text-danger">Moniker *</label>
          <input [(ngModel)]="model.moniker" class="form-control" placeholder="The prefix for the website." required name="moniker" #moniker="ngModel" pattern="^[a-zA-Z0-9-_]+$" />
          <span class="text-danger" [hidden]="moniker.errors == null || !moniker.errors['required']">* Required</span>
          <span class="text-danger" [hidden]="moniker.errors == null || !moniker.errors['pattern']">* Alphanumerics, dash and underscore only!</span>
        </div>
      </div>
      <div class="well well-sm">
        <div class="form-group">
          <label class="text-danger">Event Date *</label>
          <input [(ngModel)]="model.eventDate" class="form-control" name="eventDate" required #eventDate="ngModel" pattern="^(\d{2})\/(\d{2})\/(\d{4})$" />
          <span class="text-danger" [hidden]="eventDate.errors == null || !eventDate.errors['required']">* Required</span>
          <span class="text-danger" [hidden]="eventDate.errors == null || !eventDate.errors['pattern']">* DD/MM/YYYY only</span>
        </div>
        <div class="form-group">
          <label class="text-danger">Event Length *</label>
          <input [(ngModel)]="model.eventLength" class="form-control" name="eventLength" required #eventLength="ngModel" pattern="^[a-zA-Z0-9-_]+$" />
          <span class="text-danger" [hidden]="eventLength.errors == null || !eventLength.errors['required']">* Required</span>
          <span class="text-danger" [hidden]="eventLength.errors == null || !eventLength.errors['pattern']">* Alphanumerics, dash and underscore only!</span>
        </div>
        <div class="form-group">
          <label class="text-danger">Call For Speaker Opening Date *</label>
          <input [(ngModel)]="model.callForSpeakersOpened" class="form-control" name="callForSpeakersOpened" required #callForSpeakersOpened="ngModel" pattern="^(\d{2})\/(\d{2})\/(\d{4})$" />
          <span class="text-danger" [hidden]="callForSpeakersOpened.errors == null || !callForSpeakersOpened.errors['required']">* Required</span>
          <span class="text-danger" [hidden]="callForSpeakersOpened.errors == null || !callForSpeakersOpened.errors['pattern']">* DD/MM/YYYY only</span>
        </div>
        <div class="form-group">
          <label class="text-danger">Call For Speaker Closing Date *</label>
          <input [(ngModel)]="model.callForSpeakersClosed" class="form-control" name="callForSpeakersClosed" required #callForSpeakersClosed="ngModel" pattern="^(\d{2})\/(\d{2})\/(\d{4})$" />
          <span class="text-danger" [hidden]="callForSpeakersClosed.errors == null || !callForSpeakersClosed.errors['required']">* Required</span>
          <span class="text-danger" [hidden]="callForSpeakersClosed.errors == null || !callForSpeakersClosed.errors['pattern']">* DD/MM/YYYY only</span>
        </div>
      </div>
      <div class="well well-sm">
        <div class="form-group">
          <label class="text-danger">Contact Email *</label>
          <input [(ngModel)]="model.contactEmail" class="form-control" placeholder="Contact Email" name="contactEmail" #contactEmail="ngModel" />
          <span class="text-danger" [hidden]="contactEmail.errors == null || !contactEmail.errors['required']">* Required</span>
        </div>
        <div class="form-group">
          <label>Facebook Link</label>
          <input [(ngModel)]="model.facebookLink" class="form-control" placeholder="Link to a Faceboook Page" name="facebookLink" #facebookLink="ngModel" pattern="^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$" />
          <span class="text-danger" [hidden]="facebookLink.errors == null || !facebookLink.errors['pattern']">* must be a valid url (e.g. start with http(s))</span>
        </div>
        <div class="form-group">
          <label>Twitter Link</label>
          <input [(ngModel)]="model.twitterLink" class="form-control" placeholder="Link to Twitter" name="twitterLink" #twitterLink="ngModel" pattern="^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$" />
          <span class="text-danger" [hidden]="twitterLink.errors == null || !twitterLink.errors['pattern']">* must be a valid url (e.g. start with http(s))</span>
        </div>
        <div class="form-group">
          <label>Instagram Link</label>
          <input [(ngModel)]="model.instagramLink" class="form-control" placeholder="Link to Instagram" name="instagramLink" #instagramLink="ngModel" pattern="^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$" />
          <span class="text-danger" [hidden]="instagramLink.errors == null || !instagramLink.errors['pattern']">* must be a valid url (e.g. start with http(s))</span>
        </div>
        <div class="form-group">
          <label>Registration Link</label>
          <input [(ngModel)]="model.registrationLink" class="form-control" placeholder="Link to Meetup or EventBrite" name="registrationLink" #registrationLink="ngModel" pattern="^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$" />
          <span class="text-danger" [hidden]="registrationLink.errors == null || !registrationLink.errors['pattern']">* must be a valid url (e.g. start with http(s))</span>
        </div>
      </div>
      <div class="well well-sm">
        <div class="form-group">
          <label>Facility Name</label>
          <input [(ngModel)]="location.facility" class="form-control" placeholder="Name of the facility" name="facility" />
        </div>
        <div class="form-group">
          <label>Address</label>
          <input [(ngModel)]="location.address1" class="form-control" placeholder="Address" name="address1" />
        </div>
        <div class="form-group">
          <label>Address (2nd Line)</label>
          <input [(ngModel)]="location.address2" class="form-control" placeholder="" name="address2" />
        </div>
        <div class="form-group">
          <label>City</label>
          <input [(ngModel)]="location.city" class="form-control" placeholder="City" name="city" />
        </div>
        <div class="form-group">
          <label>State</label>
          <input [(ngModel)]="location.stateProvince" class="form-control" placeholder="State" name="stateProvince" />
        </div>
        <div class="form-group">
          <label>Postal Code</label>
          <input [(ngModel)]="location.postalCode" class="form-control" placeholder="e.g. 12345" name="postalCode" />
        </div>
        <div class="form-group">
          <label>Country</label>
          <input [(ngModel)]="location.country" class="form-control" placeholder="USA" name="country" />
        </div>
        <div class="form-group">
          <label>Facility Web URL</label>
          <input [(ngModel)]="location.link" class="form-control" placeholder="A web address" name="link" />
        </div>
      </div>
      <div class="form-group">
        <input type="submit" class="btn btn-success btn-lg" value="Save" [disabled]="!theForm.form.valid" />
        <p class="text-success" [style.visibility]="msg ? 'visible' : 'hidden'">{{ msg }}</p>
      </div>
    </form>
  </div>
  <div class="col-md-6">
    <div class="row">
      <h3>Tracks</h3>
      <table class="table table-condensed table-responsive table-striped">
        <thead>
          <tr>
            <td class="col-md-10">Name</td>
            <td class="col-md-2"></td>
          </tr>
        </thead>
        <tr *ngFor="let track of tracks">
          <td>{{ track.name }}</td>
          <td><button class="btn btn-sm btn-danger" title="Delete" (click)="deleteTrack(track)"><i class="fa fa-remove"></i></button></td>
        </tr>
      </table>
      <input [(ngModel)]="newTrack" name="newTrack" /> <button class="btn btn-success" (click)="saveTrack()"><i class="fa fa-plus"></i></button>
      <hr />
      <h3>Time Slots</h3>
      <table class="table table-condensed table-responsive table-striped">
        <thead>
          <tr>
            <td class="col-md-10">Time</td>
            <td class="col-md-2"></td>
          </tr>
        </thead>
        <tr *ngFor="let timeSlot of timeSlots">
          <td>{{ timeSlot.time | date:"shortTime" }}</td>
          <td><button class="btn btn-sm btn-danger" title="Delete" (click)="deleteTimeSlot(timeSlot)"><i class="fa fa-remove"></i></button></td>
        </tr>
      </table>
      <input [(ngModel)]="newTimeSlot" name="newTimeSlot" /> <button class="btn btn-success" (click)="saveTimeSlot()"><i class="fa fa-plus"></i></button>
      <hr />
      <h3>Rooms</h3>
      <table class="table table-condensed table-responsive table-striped">
        <thead>
          <tr>
            <td class="col-md-10">Name</td>
            <td class="col-md-2"></td>
          </tr>
        </thead>
        <tr *ngFor="let room of rooms">
          <td>{{ room.name }}</td>
          <td><button class="btn btn-sm btn-danger" title="Delete" (click)="deleteRoom(room)"><i class="fa fa-remove"></i></button></td>
        </tr>
      </table>
      <input [(ngModel)]="newRoom" name="newRoom" /> <button class="btn btn-success" (click)="saveRoom()"><i class="fa fa-plus"></i></button>
    </div>
  </div>
</div>